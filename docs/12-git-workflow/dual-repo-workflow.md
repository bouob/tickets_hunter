**æ–‡ä»¶èªªæ˜**ï¼šå…¬é–‹èˆ‡ç§äºº Repo çš„é›™é‡ç¶­è­·å·¥ä½œæµç¨‹ï¼Œæ¶µè“‹ Repo è§’è‰²å®šç¾©ã€å·¥ä½œæµç¨‹ã€æ¨é€ç­–ç•¥èˆ‡å¯¦éš›æ¡ˆä¾‹ã€‚

**æœ€å¾Œæ›´æ–°**ï¼š2025-11-12

---

# é›™ Repo ç¶­è­·å·¥ä½œæµç¨‹

æœ¬æ–‡ä»¶èªªæ˜å¦‚ä½•åŒæ™‚ç¶­è­·å…¬é–‹ repo (origin) å’Œç§äºº repo (private) çš„å®Œæ•´å·¥ä½œæµç¨‹ã€‚

---

## ğŸ“‹ ç›®éŒ„

- [Repo è§’è‰²å®šç¾©](#repo-è§’è‰²å®šç¾©)
- [å·¥ä½œæµç¨‹ç¸½è¦½](#å·¥ä½œæµç¨‹ç¸½è¦½)
- [æ—¥å¸¸é–‹ç™¼æµç¨‹](#æ—¥å¸¸é–‹ç™¼æµç¨‹)
- [ç™¼å¸ƒæµç¨‹](#ç™¼å¸ƒæµç¨‹)
- [æ©Ÿæ•æª”æ¡ˆç®¡ç†](#æ©Ÿæ•æª”æ¡ˆç®¡ç†)
- [ç·Šæ€¥ä¿®å¾©æµç¨‹](#ç·Šæ€¥ä¿®å¾©æµç¨‹)
- [å¸¸è¦‹å•é¡Œæ’è§£](#å¸¸è¦‹å•é¡Œæ’è§£)

---

## Repo è§’è‰²å®šç¾©

### Originï¼ˆå…¬é–‹ Repoï¼‰

- **URL**: `https://github.com/bouob/tickets_hunter.git`
- **ç”¨é€”**: å…¬é–‹ç™¼å¸ƒã€é–‹æºåˆ†äº«ã€Release ä¸‹è¼‰
- **å…§å®¹**: åƒ…åŒ…å«ç¨‹å¼ç¢¼ã€å…¬é–‹æ–‡ä»¶ï¼ˆREADMEã€CHANGELOGç­‰ï¼‰
- **é™åˆ¶**: çµ•å°ä¸åŒ…å«æ©Ÿæ•æª”æ¡ˆï¼ˆé–‹ç™¼æ–‡ä»¶ã€å…§éƒ¨è¨­å®šç­‰ï¼‰

### Privateï¼ˆç§äºº Repoï¼‰

- **URL**: `https://github.com/bouob/private-tickets-hunter.git`ï¼ˆç¯„ä¾‹ï¼‰
- **ç”¨é€”**: ä¸»åŠ›é–‹ç™¼ã€å®Œæ•´æ–‡ä»¶ã€å…§éƒ¨å”ä½œ
- **å…§å®¹**: åŒ…å«æ‰€æœ‰å…§å®¹ï¼ˆç¨‹å¼ç¢¼ + æ©Ÿæ•æª”æ¡ˆï¼‰
- **ç‰¹æ€§**: ä½œç‚ºé–‹ç™¼çš„å–®ä¸€çœŸç›¸ä¾†æºï¼ˆSingle Source of Truthï¼‰
- **æµç¨‹æ–¹å‘**: å–®å‘æ¨é€åˆ° Publicï¼ˆâš ï¸ çµ•å°ä¸å¾ Public æ‹‰å›è®Šæ›´ï¼‰

---

## å·¥ä½œæµç¨‹ç¸½è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é›™ Repo ç¶­è­·æµç¨‹åœ–                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ—¥å¸¸é–‹ç™¼éšæ®µ    â”‚
â”‚  (Private Repo) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â–º /gsave          è‡ªå‹•åˆ†é›¢å…¬é–‹/æ©Ÿæ•æª”æ¡ˆç‚ºä¸åŒ commits
         â”‚                   - å…¬é–‹ commitï¼ˆæ¨™æº–æ ¼å¼ï¼‰
         â”‚                   - æ©Ÿæ• commitï¼ˆğŸ”’ PRIVATE æ¨™è¨˜ï¼‰
         â”‚
         â”œâ”€â–º /gpush          æ¨é€å…¬é–‹ commits åˆ° private repo
         â”‚                   - è­˜åˆ¥ PRIVATE æ¨™è¨˜è·³éæ©Ÿæ• commits
         â”‚                   - åƒ…æ¨é€å…¬é–‹ commits
         â”‚
         â”œâ”€â–º /privatepush    æ¨é€æ©Ÿæ• commits åˆ° private repo
         â”‚                   - å„ªå…ˆæ¨é€ç¾æœ‰ PRIVATE commits
         â”‚                   - å›é€€ï¼šæ‰‹å‹•å»ºç«‹æ©Ÿæ• commitï¼ˆgit add -fï¼‰
         â”‚
         â””â”€â–º æŒçºŒé–‹ç™¼...
                 â”‚
                 â”‚ å®Œæˆéšæ®µæ€§é–‹ç™¼
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç™¼å¸ƒéšæ®µ      â”‚
â”‚  (Public Repo)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â–º /publicpr       å»ºç«‹ PR åˆ° originï¼ˆè‡ªå‹•éæ¿¾æ©Ÿæ• commitsï¼‰
         â”‚    â”œâ”€ ç­–ç•¥é¸æ“‡ï¼ˆcommits > 10 â†’ Squash Mergeï¼‰â­
         â”‚    â”œâ”€ Squash: åˆ†ææª”æ¡ˆè®Šæ›´ï¼Œåˆä½µç‚º 1 å€‹ commit
         â”‚    â”œâ”€ Cherry-pick: æƒæ commitsï¼Œé€ä¸€ cherry-pick
         â”‚    â””â”€ å»ºç«‹ PR
         â”‚
         â”œâ”€â–º Code Review
         â”‚
         â”œâ”€â–º Merge PR
         â”‚
         â”œâ”€â–º Release ğŸ‰
         â”‚
         â””â”€â–º âš ï¸ ä¸æ‹‰å›åˆ° Privateï¼ˆå–®å‘æµç¨‹ï¼Œé¿å…ç ´å£ historyï¼‰
```

---

## æ—¥å¸¸é–‹ç™¼æµç¨‹

### æ¨™æº–æµç¨‹ï¼ˆæ¨è–¦ï¼‰

```bash
# Step 1: ä¿®æ”¹æª”æ¡ˆï¼ˆç¨‹å¼ç¢¼ + å…§éƒ¨æ–‡ä»¶ï¼‰
# ç·¨è¼¯ src/nodriver_ticketplus.pyï¼ˆæ–°åŠŸèƒ½ï¼‰
# ç·¨è¼¯ docs/02-development/structure.mdï¼ˆå…§éƒ¨æ–‡ä»¶ï¼‰
# ç·¨è¼¯ CLAUDE.mdï¼ˆé–‹ç™¼è¦ç¯„ï¼‰

# Step 2: è‡ªå‹•åˆ†é›¢æäº¤
/gsave
# åŸ·è¡Œæµç¨‹ï¼š
# 1. åˆ†æè®Šæ›´æª”æ¡ˆ
# 2. è‡ªå‹•æ’é™¤ .gitignore ä¸­çš„æª”æ¡ˆ
# 3. åˆ†é›¢å…¬é–‹èˆ‡æ©Ÿæ•æª”æ¡ˆ
# 4. å»ºç«‹å…©å€‹ commitsï¼š
#    âœ¨ feat(nodriver): add feature Xï¼ˆå…¬é–‹ï¼‰
#    ğŸ“ docs(private): update internal docsï¼ˆæ©Ÿæ•ï¼ŒğŸ”’ PRIVATE æ¨™è¨˜ï¼‰

# Step 3: æ¨é€å…¬é–‹ commits
/gpush
# åŸ·è¡Œæµç¨‹ï¼š
# 1. æª¢æŸ¥æœ¬åœ° commits
# 2. è­˜åˆ¥ PRIVATE æ¨™è¨˜ â†’ è·³éæ©Ÿæ• commit
# 3. éæ¿¾ .gitignore æª”æ¡ˆ
# 4. æ¨é€å…¬é–‹ commits åˆ° private main

# Step 4: æ¨é€æ©Ÿæ• commits
/privatepush
# åŸ·è¡Œæµç¨‹ï¼š
# 1. æª¢æ¸¬æœªæ¨é€çš„ PRIVATE commits
# 2. ç›´æ¥æ¨é€æ©Ÿæ• commits åˆ° private main

# çµæœï¼šprivate repo åŒ…å«å®Œæ•´è®Šæ›´ï¼ˆå…¬é–‹ + æ©Ÿæ•ï¼‰
```

### ç°¡åŒ–æµç¨‹ï¼ˆåƒ…å…¬é–‹æª”æ¡ˆï¼‰

```bash
# æƒ…å¢ƒï¼šåƒ…ä¿®æ”¹ç¨‹å¼ç¢¼ï¼Œç„¡å…§éƒ¨æ–‡ä»¶è®Šæ›´

# Step 1: ä¿®æ”¹ç¨‹å¼ç¢¼
# ç·¨è¼¯ src/nodriver_tixcraft.py
# ç·¨è¼¯ tests/test_tixcraft.py

# Step 2: æäº¤
/gsave
# â†’ å»ºç«‹ 1 å€‹å…¬é–‹ commit

# Step 3: æ¨é€
/gpush
# â†’ æ¨é€å…¬é–‹ commit åˆ° private

# ç„¡éœ€åŸ·è¡Œ /privatepushï¼ˆç„¡æ©Ÿæ•æª”æ¡ˆè®Šæ›´ï¼‰
```

### æ‰‹å‹•æ©Ÿæ•æª”æ¡ˆæ¨é€

```bash
# æƒ…å¢ƒï¼šåƒ…ä¿®æ”¹å…§éƒ¨æ–‡ä»¶ï¼Œæœªä½¿ç”¨ /gsave

# Step 1: æ‰‹å‹•ç·¨è¼¯æ©Ÿæ•æª”æ¡ˆ
# ç·¨è¼¯ docs/02-development/structure.md
# ç·¨è¼¯ CLAUDE.md

# Step 2: ç›´æ¥æ¨é€
/privatepush
# åŸ·è¡Œæµç¨‹ï¼š
# 1. æª¢æ¸¬ç„¡ç¾æœ‰ PRIVATE commits
# 2. è©¢å•æ˜¯å¦æ‰‹å‹•å»ºç«‹ PRIVATE commit
# 3. ä½¿ç”¨ git add -f å¼·åˆ¶åŠ å…¥
# 4. å»ºç«‹ä¸¦æ¨é€ PRIVATE commit
```

---

## ç™¼å¸ƒæµç¨‹

### éšæ®µæ€§ç™¼å¸ƒåˆ°å…¬é–‹ Repo

```bash
# æƒ…å¢ƒï¼šå®Œæˆ TicketPlus æ”¯æ´ï¼Œæº–å‚™ç™¼å¸ƒåˆ°å…¬é–‹ repo

# Step 1: ç¢ºèª private repo å·²åŒ…å«æ‰€æœ‰è®Šæ›´
git status
# ç¢ºä¿å·¥ä½œç›®éŒ„ä¹¾æ·¨

# Step 2: ä½¿ç”¨ /publicpr å»ºç«‹ PR åˆ° origin
/publicpr

# åŸ·è¡Œæµç¨‹ï¼š
# 1. ç¢ºèªç›®æ¨™ repo (origin)
# 2. æƒææœªæ¨é€çš„ commits
#    ç¯„ä¾‹è¼¸å‡ºï¼š
#    âœ… æ‰¾åˆ° 8 å€‹ commits
#    âš ï¸ ç™¼ç¾ 3 å€‹ commits åŒ…å«æ©Ÿæ•æª”æ¡ˆï¼ˆå·²æ’é™¤ï¼‰ï¼š
#      - abc1234 docs: update development guide
#      - def5678 chore: update CLAUDE.md
#      - ghi9012 feat: add spec for new feature
#    âœ… å‰©é¤˜ 5 å€‹æœ‰æ•ˆ commits å°‡è¢«æ¨é€
#
# 3. é è¦½æª”æ¡ˆè®Šæ›´ï¼ˆæ’é™¤æ©Ÿæ•æª”æ¡ˆï¼‰
# 4. ç¢ºèªæ¨é€ï¼Ÿy
# 5. å»ºç«‹è‡¨æ™‚åˆ†æ”¯: public-sync-2025-11-07-1430
# 6. Cherry-pick 5 å€‹æœ‰æ•ˆ commits
# 7. æ¨é€åˆ° origin
# 8. å»ºç«‹ PR: https://github.com/bouob/tickets_hunter/pull/123

# Step 3: Code Review
# åœ¨ GitHub ä¸Šæª¢æŸ¥ PR å…§å®¹

# Step 4: Merge PR
# ä½¿ç”¨ GitHub UI æˆ– gh CLI merge

# Step 5: Release
# åœ¨ origin repo å»ºç«‹ Release
```

### é è¦½æ¨¡å¼ï¼ˆæ¨è–¦ï¼‰

```bash
# å…ˆé è¦½ä¸å¯¦éš›æ¨é€
/publicpr --dry-run

# è¼¸å‡ºç¯„ä¾‹ï¼š
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ“‹ Commit æƒæçµæœ
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# âœ… æ‰¾åˆ° 8 å€‹ commits
# âš ï¸ ç™¼ç¾ 3 å€‹ commits åŒ…å«æ©Ÿæ•æª”æ¡ˆï¼ˆå·²æ’é™¤ï¼‰
# âœ… å‰©é¤˜ 5 å€‹æœ‰æ•ˆ commits å°‡è¢«æ¨é€
#
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ“‹ æª”æ¡ˆè®Šæ›´é è¦½
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# æ–°å¢æª”æ¡ˆ (2):
#   + src/nodriver_ticketplus.py
#   + tests/test_ticketplus.py
# ä¿®æ”¹æª”æ¡ˆ (5):
#   ~ src/chrome_tixcraft.py
#   ~ README.md
#   ~ CHANGELOG.md
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ” Dry-run æ¨¡å¼ï¼Œä¸åŸ·è¡Œå¯¦éš›æ¨é€
```

### Squash Merge ç­–ç•¥ï¼ˆæ¨è–¦ç”¨æ–¼å¤§é‡ commitsï¼‰â­ æ–°å¢

**ä½¿ç”¨æ™‚æ©Ÿ**: commits æ•¸é‡ > 10 å€‹

#### ç‚ºä»€éº¼ä½¿ç”¨ Squash Mergeï¼Ÿ

æ ¹æ“šå¯¦éš›ç¶“é©—ï¼ˆåƒè€ƒ logs.txt æ¡ˆä¾‹ï¼‰ï¼š

**å•é¡Œå ´æ™¯**:
- Private repo ç´¯ç© 1167 å€‹ commitsï¼ˆè·¨åº¦ 2022-2025ï¼‰
- Cherry-pick æ¨¡å¼éœ€è¦é€ä¸€æƒææ¯å€‹ commit
- è€—æ™‚æ•¸å°æ™‚ï¼Œæ¶ˆè€—å¤§é‡ token
- å¯èƒ½é‡åˆ°å¤§é‡ cherry-pick è¡çª

**Squash è§£æ±ºæ–¹æ¡ˆ**:
- ç›´æ¥åˆ†ææª”æ¡ˆè®Šæ›´ï¼ˆä¸æƒæ commitsï¼‰
- éæ¿¾æ©Ÿæ•æª”æ¡ˆå¾Œåˆä½µç‚º 1 å€‹ commit
- æ•¸åˆ†é˜å®Œæˆï¼ˆç¯€çœ 95% æ™‚é–“ï¼‰
- é¿å… cherry-pick è¡çª

#### åŸ·è¡Œæ–¹å¼

```bash
/publicpr

# ç³»çµ±è‡ªå‹•æª¢æ¸¬ commits æ•¸é‡ï¼š
# - commits > 50 â†’ å¼·åˆ¶ Squash Merge
# - 10 < commits â‰¤ 50 â†’ å»ºè­° Squash Mergeï¼ˆè©¢å•ç¢ºèªï¼‰
# - commits â‰¤ 10 â†’ ä½¿ç”¨ Cherry-pick

# æ‰‹å‹•å¼·åˆ¶ä½¿ç”¨ Squash:
/publicpr --strategy=squash
```

#### å„ªå‹¢

1. **æ•ˆèƒ½æå‡**: é¿å…æƒæå¤§é‡ commitsï¼ˆ1167 å€‹ â†’ 0 å€‹ï¼‰
2. **æ˜“æ–¼å¯©æŸ¥**: PR åªæœ‰ 1 å€‹ squash commit
3. **é¿å…è¡çª**: ç›´æ¥è¤‡è£½æª”æ¡ˆï¼Œä¸éœ€ cherry-pick
4. **ç°¡æ½” History**: Public repo çš„ commit history æ›´ä¹¾æ·¨

#### æ³¨æ„äº‹é …

âœ… **æ­£å¸¸ç¾è±¡**:
- Public repo åªæœ‰ 1 å€‹ squash commit
- Private repo ä¿ç•™å®Œæ•´ commitsï¼ˆä¾‹å¦‚ 1167 å€‹ï¼‰
- å…©å€‹ repo çš„ history å®Œå…¨ä¸åŒï¼ˆé€™æ˜¯è¨­è¨ˆå¦‚æ­¤ï¼‰

âŒ **çµ•å°ä¸è¦**:
- ä¸è¦å¾ public æ‹‰å›è®Šæ›´åˆ° privateï¼ˆæœƒç ´å£å®Œæ•´ historyï¼‰
- ä¸è¦è©¦åœ–è®“å…©å€‹ repo çš„ history å°é½Š
- Private æ°¸é æ˜¯ Single Source of Truth

#### å¯¦éš›æ¡ˆä¾‹

**logs.txt æ¡ˆä¾‹**ï¼ˆ2025-11-12ï¼‰:
```
åŸå§‹ç‹€æ…‹ï¼š
- Private repo: 1167 å€‹ commitsï¼ˆ2022-2025ï¼‰
- Public repo: è½å¾Œæ•¸ç™¾å€‹ commits

Cherry-pick å˜—è©¦ï¼ˆå¤±æ•—ï¼‰:
- æƒæ 1167 å€‹ commitsï¼ˆè€—æ™‚éé•·ï¼‰
- éœ€è¦ cherry-pick 1125 å€‹æœ‰æ•ˆ commits
- é è¨ˆæ•¸å°æ™‚ï¼Œå¯èƒ½å¤§é‡è¡çª

Squash Merge è§£æ±º:
- åˆ†ææª”æ¡ˆè®Šæ›´: 13 å€‹ä¿®æ”¹æª”æ¡ˆ
- å»ºç«‹ squash commit: 1 å€‹
- æ¨é€ä¸¦å»ºç«‹ PR: æˆåŠŸ
- ç¸½è€—æ™‚: æ•¸åˆ†é˜
```

---

## æ©Ÿæ•æª”æ¡ˆç®¡ç†

### æ©Ÿæ•æª”æ¡ˆæ¸…å–®

ä»¥ä¸‹æª”æ¡ˆ/ç›®éŒ„è¢«è¦–ç‚ºæ©Ÿæ•æª”æ¡ˆï¼Œ**ä¸æœƒ**å‡ºç¾åœ¨å…¬é–‹ repo ä¸­ï¼š

```
.claude/          - Claude è‡ªå‹•åŒ–è¨­å®šï¼ˆslash commandsã€hooksï¼‰
CLAUDE.md         - å°ˆæ¡ˆé–‹ç™¼è¦ç¯„ã€å…§éƒ¨æŒ‡å¼•
docs/             - æŠ€è¡“æ–‡ä»¶å’Œé–‹ç™¼æŒ‡å—
.specify/         - è¦æ ¼æ¨¡æ¿å’ŒæŒ‡ä»¤ç¢¼ï¼ˆspeckit ç›¸é—œï¼‰
specs/            - åŠŸèƒ½è¦æ ¼å’Œè¨­è¨ˆæ–‡ä»¶
FAQ/              - å¸¸è¦‹å•é¡Œè§£ç­”ï¼ˆå¯èƒ½åŒ…å«å…§éƒ¨è³‡è¨Šï¼‰
```

### .gitignore è¨­å®š

ç¢ºä¿ `.gitignore` åŒ…å«ä»¥ä¸‹è¦å‰‡ï¼š

```gitignore
# æ©Ÿæ•æª”æ¡ˆ
.claude/
CLAUDE.md
/docs/
.specify/
specs/
FAQ/

# æ¸¬è©¦ç›¸é—œ
MAXBOT_INT28_IDLE.txt
src/MAXBOT_INT28_IDLE.txt
.temp/

# ç’°å¢ƒç›¸é—œ
.env
*.log
```

### æ©Ÿæ•æª”æ¡ˆçš„è‡ªå‹•ä¿è­·

1. **`/gsave` æŒ‡ä»¤**ï¼š
   - è‡ªå‹•è®€å– `.gitignore`
   - æ’é™¤è¢«å¿½ç•¥çš„æª”æ¡ˆ
   - åƒ…æäº¤æ‡‰è©²ç‰ˆæ§çš„æª”æ¡ˆ

2. **`/gpush` æŒ‡ä»¤**ï¼š
   - æª¢æŸ¥ commits ä¸­çš„æª”æ¡ˆ
   - éæ¿¾åŒ…å«è¢«å¿½ç•¥æª”æ¡ˆçš„ commits
   - åƒ…æ¨é€ä¹¾æ·¨çš„ commits

3. **`/publicpr` æŒ‡ä»¤**ï¼š
   - æƒææ¯å€‹ commit çš„æª”æ¡ˆæ¸…å–®
   - è‡ªå‹•æ’é™¤åŒ…å«æ©Ÿæ•æª”æ¡ˆçš„ commits
   - ä½¿ç”¨ cherry-pick ç¢ºä¿ history ä¹¾æ·¨

### æ‰‹å‹•æª¢æŸ¥æ–¹æ³•

```bash
# æª¢æŸ¥ç•¶å‰å·¥ä½œç›®éŒ„ä¸­çš„æ©Ÿæ•æª”æ¡ˆ
git status --ignored

# æª¢æŸ¥æœ€è¿‘ commits æ˜¯å¦åŒ…å«æ©Ÿæ•æª”æ¡ˆ
git log --name-only -5 | grep -E "(.claude/|docs/|CLAUDE.md|.specify/|specs/|FAQ/)"

# æª¢æŸ¥å…¬é–‹ repo æ˜¯å¦å·²åŒ…å«æ©Ÿæ•æª”æ¡ˆ
git clone https://github.com/bouob/tickets_hunter.git temp-check
cd temp-check
ls -la .claude/ docs/ 2>/dev/null && echo "âš ï¸ æ©Ÿæ•æª”æ¡ˆå­˜åœ¨ï¼" || echo "âœ… å®‰å…¨"
```

---

## ç·Šæ€¥ä¿®å¾©æµç¨‹

### æƒ…å¢ƒï¼šå…¬é–‹ repo ç™¼ç¾åš´é‡ bugï¼Œéœ€è¦ç«‹å³ä¿®å¾©

#### é¸é … 1ï¼šåœ¨ Private Repo ä¿®å¾©å¾Œç™¼å¸ƒï¼ˆæ¨è–¦ï¼‰

```bash
# 1. åœ¨ private repo ä¿®å¾© bug
git checkout -b hotfix/critical-bug
# ç·¨è¼¯æª”æ¡ˆä¿®å¾© bug
/gsave
git checkout main
git merge hotfix/critical-bug

# 2. ç«‹å³ç™¼å¸ƒåˆ° origin
/publicpr

# 3. Merge PRï¼ˆå¯ä½¿ç”¨ fast-forwardï¼‰
gh pr merge --squash
```

#### é¸é … 2ï¼šç›´æ¥åœ¨ Origin ä¿®å¾©ï¼ˆä¸æ¨è–¦ï¼‰

```bash
# 1. Clone origin repo
git clone https://github.com/bouob/tickets_hunter.git origin-hotfix
cd origin-hotfix

# 2. ä¿®å¾© bug
git checkout -b hotfix/critical-bug
# ç·¨è¼¯æª”æ¡ˆä¿®å¾© bug
git commit -m "fix: resolve critical bug"

# 3. å»ºç«‹ PR åˆ° origin
gh pr create --title "Hotfix: Critical Bug" --base main

# 4. Merge PR
gh pr merge --squash

# 5. åŒæ­¥å› private repo
cd /path/to/private-repo
git fetch origin
git merge origin/main
```

**æ³¨æ„**ï¼šé¸é … 2 æœƒå°è‡´ private å’Œ origin çš„ history ä¸ä¸€è‡´ï¼Œéœ€è¦æ‰‹å‹•åŒæ­¥ã€‚

---

## å¸¸è¦‹å•é¡Œæ’è§£

### å•é¡Œ 1ï¼šä¸å°å¿ƒæ¨é€æ©Ÿæ•æª”æ¡ˆåˆ° Origin

**ç—‡ç‹€**ï¼š
```bash
git log origin/main --name-only | grep "CLAUDE.md"
# è¼¸å‡ºï¼šCLAUDE.md
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

1. **ç«‹å³å¾ origin åˆªé™¤æª”æ¡ˆ**
   ```bash
   git checkout origin/main
   git rm CLAUDE.md docs/ -r
   git commit -m "chore: remove sensitive files"
   git push origin main
   ```

2. **æ¸…ç† Git Historyï¼ˆå¦‚æœå·²æäº¤å¤šå€‹ç‰ˆæœ¬ï¼‰**
   ```bash
   # ä½¿ç”¨ git filter-branch
   git filter-branch --force --index-filter \
     "git rm --cached --ignore-unmatch CLAUDE.md docs/ -r" \
     --prune-empty --tag-name-filter cat -- --all

   # å¼·åˆ¶æ¨é€
   git push origin --force --all
   git push origin --force --tags
   ```

3. **é€šçŸ¥å”ä½œè€…**
   ```
   âš ï¸ é‡è¦é€šçŸ¥ï¼šorigin repo çš„ history å·²è¢«é‡å¯«

   è«‹æ‰€æœ‰å”ä½œè€…åŸ·è¡Œï¼š
   1. git fetch origin
   2. git reset --hard origin/main
   ```

### å•é¡Œ 2ï¼š/publicpr æ²’æœ‰æ‰¾åˆ°æœ‰æ•ˆ commits

**ç—‡ç‹€**ï¼š
```
âš ï¸ æ²’æœ‰å¯æ¨é€çš„ commitsï¼
æ‰€æœ‰ commits éƒ½åŒ…å«æ©Ÿæ•æª”æ¡ˆã€‚
```

**åŸå› **ï¼šæ‰€æœ‰æœªæ¨é€çš„ commits éƒ½åŒ…å«æ©Ÿæ•æª”æ¡ˆè®Šæ›´

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

1. **æª¢æŸ¥ commits æ¸…å–®**
   ```bash
   git log origin/main..HEAD --name-only
   ```

2. **æ‰‹å‹•åˆ†é›¢ç¨‹å¼ç¢¼å’Œæ©Ÿæ•æª”æ¡ˆ**
   ```bash
   # å›åˆ°åˆ†é›¢é»
   git reset --soft origin/main

   # åˆ†æ‰¹æäº¤
   git add src/ tests/ README.md CHANGELOG.md
   git commit -m "feat: add new feature"

   git add docs/ CLAUDE.md
   git commit -m "docs: update internal docs"
   ```

3. **é‡æ–°åŸ·è¡Œ /publicpr**
   ```bash
   /publicpr
   # ç¾åœ¨æ‡‰è©²èƒ½æ‰¾åˆ°æœ‰æ•ˆ commits
   ```

### å•é¡Œ 3ï¼šCherry-pick è¡çª

**ç—‡ç‹€**ï¼š
```
âš ï¸ Cherry-pick å¤±æ•—: abc1234 feat: add feature X
è¡çªæª”æ¡ˆï¼š
  - src/chrome_tixcraft.py
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

1. **æ‰‹å‹•è§£æ±ºè¡çª**
   ```bash
   # ç·¨è¼¯è¡çªæª”æ¡ˆ
   vim src/chrome_tixcraft.py

   # æ¨™è¨˜ç‚ºå·²è§£æ±º
   git add src/chrome_tixcraft.py

   # ç¹¼çºŒ cherry-pick
   git cherry-pick --continue
   ```

2. **é‡æ–°åŸ·è¡Œ /publicpr**
   ```bash
   # /publicpr æœƒå¾ä¸­æ–·é»ç¹¼çºŒ
   ```

### å•é¡Œ 4ï¼šPrivate å’Œ Origin çš„ History åˆ†æ­§

**ç—‡ç‹€**ï¼š
```bash
git log origin/main..private/main --oneline | wc -l
# è¼¸å‡ºï¼š50+  ï¼ˆå·®ç•°éå¤§ï¼‰
```

**åŸå› **ï¼šé•·æœŸæœªåŒæ­¥ï¼Œæˆ–ç›´æ¥åœ¨ origin ä¿®æ”¹

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

1. **å®šæœŸåŒæ­¥**ï¼ˆæ¨è–¦ï¼‰
   ```bash
   # æ¯é€±åŸ·è¡Œä¸€æ¬¡
   /publicpr
   ```

2. **å¼·åˆ¶å°é½Š**ï¼ˆå±éšªï¼Œåƒ…åœ¨å¿…è¦æ™‚ä½¿ç”¨ï¼‰
   ```bash
   # åœ¨ private repo
   git fetch origin
   git checkout -b sync-origin
   git reset --hard origin/main

   # æŒ‘é¸ private çš„ç¨æœ‰ commits
   git cherry-pick [commit-range]

   # æ¸¬è©¦ç„¡èª¤å¾Œ
   git checkout main
   git reset --hard sync-origin
   ```

### å•é¡Œ 5ï¼šgh CLI æœªå®‰è£æˆ–æœªç™»å…¥

**ç—‡ç‹€**ï¼š
```
command not found: gh
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

1. **å®‰è£ gh CLI**
   ```bash
   # Windows (Scoop)
   scoop install gh

   # Windows (Chocolatey)
   choco install gh

   # macOS
   brew install gh

   # Linux
   # åƒè€ƒï¼šhttps://cli.github.com/
   ```

2. **ç™»å…¥ GitHub**
   ```bash
   gh auth login
   # é¸æ“‡ GitHub.com
   # é¸æ“‡ HTTPS
   # è·Ÿéš¨æç¤ºå®Œæˆé©—è­‰
   ```

3. **é©—è­‰ç™»å…¥ç‹€æ…‹**
   ```bash
   gh auth status
   ```

---

## æœ€ä½³å¯¦è¸

### 1. é »ç¹æäº¤ï¼Œé›†ä¸­æ¨é€

```bash
# âœ… æ¨è–¦
/gsave  # å°æ”¹å‹• 1
/gsave  # å°æ”¹å‹• 2
/gsave  # å°æ”¹å‹• 3
/gpush  # çµ±ä¸€æ¨é€ï¼ˆå¯é¸æ“‡åˆä½µï¼‰

# âŒ ä¸æ¨è–¦
# ç´¯ç©å¤§é‡è®Šæ›´å¾Œä¸€æ¬¡æäº¤ï¼ˆé›£ä»¥è¿½è¹¤ï¼‰
```

### 2. å®šæœŸåŒæ­¥åˆ°å…¬é–‹ Repo

```bash
# å»ºè­°é »ç‡ï¼š
# - æ¯é€±ä¸€æ¬¡ï¼šå°å‹æ›´æ–°
# - æ¯æœˆä¸€æ¬¡ï¼šé‡å¤§åŠŸèƒ½
# - éš¨æ™‚ï¼šç·Šæ€¥ä¿®å¾©

# é¿å…ï¼š
# - ç´¯ç©æ•¸æœˆæ‰åŒæ­¥ï¼ˆé€ æˆå·¨å¤§ PRï¼‰
```

### 3. ä¿æŒ .gitignore æœ€æ–°

```bash
# æ¯æ¬¡æ–°å¢æ©Ÿæ•æª”æ¡ˆæ™‚ï¼š
# 1. æ›´æ–° .gitignore
# 2. æ¸¬è©¦ /gsave æ˜¯å¦æ­£ç¢ºæ’é™¤
# 3. æ¸¬è©¦ /publicpr æ˜¯å¦æ­£ç¢ºéæ¿¾
```

### 4. ä½¿ç”¨ Dry-run æ¨¡å¼

```bash
# ç™¼å¸ƒå‰å…ˆé è¦½
/publicpr --dry-run

# ç¢ºèªç„¡èª¤å¾Œå†åŸ·è¡Œ
/publicpr
```

### 5. è¨˜éŒ„ç™¼å¸ƒæ­·å²

```bash
# åœ¨ CHANGELOG.md ä¸­è¨˜éŒ„æ¯æ¬¡å…¬é–‹ç™¼å¸ƒ
# ç¯„ä¾‹ï¼š
## [v2025.11.07] - 2025-11-07

### Public Release
- Released to origin repo via PR #123
- Added TicketPlus support
- Fixed OCR timeout issues

### Private Only (Not Released)
- Updated internal development docs
- Added new spec templates
```

### 6. ä¸å¾å…¬é–‹ Repo æ‹‰å›è®Šæ›´ï¼ˆé‡è¦ï¼‰â­ æ–°å¢

**æ ¸å¿ƒåŸå‰‡**: Private â†’ Publicï¼ˆå–®å‘æµç¨‹ï¼‰

```bash
# âŒ éŒ¯èª¤åšæ³•ï¼šå¾ origin æ‹‰å›
git pull origin main  # æœƒç ´å£ private çš„å®Œæ•´ history

# âœ… æ­£ç¢ºåšæ³•ï¼šå–®å‘æ¨é€
# Private â†’ Publicï¼ˆé€é /publicprï¼‰
# æ°¸é ä¿æŒ Private ç‚º Single Source of Truth
```

#### ç‚ºä»€éº¼ä¸èƒ½æ‹‰å›ï¼Ÿ

1. **History çµæ§‹ä¸åŒ**
   ```
   Private History:
   â”œâ”€ commit A (å…¬é–‹)
   â”œâ”€ commit B (æ©Ÿæ•, ğŸ”’ PRIVATE)
   â”œâ”€ commit C (å…¬é–‹)
   â””â”€ commit D (æ©Ÿæ•, ğŸ”’ PRIVATE)

   Public History (ç¶“éæ¿¾):
   â”œâ”€ commit A (å…¬é–‹)
   â””â”€ commit C (å…¬é–‹)

   å¦‚æœæ‹‰å›:
   âŒ commit B, D æœƒæ¶ˆå¤±
   âŒ commit hash æœƒæ”¹è®Š
   âŒ ç§äººåº«çš„å®Œæ•´è¨˜éŒ„è¢«ç ´å£
   ```

2. **Squash Merge æ›´ä¸èƒ½æ‹‰å›**
   ```
   Private History (1167 å€‹ commits):
   â”œâ”€ commit 1
   â”œâ”€ commit 2
   ... (1167 å€‹)

   Public History (Squash):
   â””â”€ squash commit (åˆä½µæ‰€æœ‰è®Šæ›´)

   å¦‚æœæ‹‰å›:
   âŒ å®Œå…¨å¤±å»æ‰€æœ‰ commit ç´°ç¯€
   âŒ ç„¡æ³•è¿½æº¯æ­·å²è¨˜éŒ„
   ```

3. **ç ´å£å–®ä¸€çœŸç›¸ä¾†æº**
   - Private æ˜¯é–‹ç™¼çš„å”¯ä¸€åŸºæº–
   - Public åªæ˜¯ç™¼å¸ƒçš„å¿«ç…§
   - æ‹‰å›æœƒå°è‡´å…©é‚Šéƒ½ä¸å®Œæ•´

#### ç·Šæ€¥æƒ…æ³è™•ç†

**æƒ…å¢ƒ**: ç›´æ¥åœ¨ origin ä¿®å¾©äº†ç·Šæ€¥ bug

```bash
# âŒ ä¸è¦é€™æ¨£åš
cd private-repo
git pull origin main  # æœƒç ´å£ history

# âœ… æ­£ç¢ºåšæ³•ï¼šæ‰‹å‹• cherry-pick
cd private-repo
git fetch origin

# åªæŒ‘é¸ä¿®å¾©çš„ commit
git cherry-pick <hotfix-commit-hash>

# æ¨é€å› private
git push private main
```

**æƒ…å¢ƒ**: Origin æœ‰å…¶ä»–å”ä½œè€…çš„ commits

```bash
# å®šæœŸæ‰‹å‹•åŒæ­¥ç‰¹å®š commits
git fetch origin
git log origin/main..HEAD  # æª¢æŸ¥å·®ç•°
git cherry-pick <commit-hash>  # åªæŒ‘é¸éœ€è¦çš„

# é¿å…æ•´æ‰¹ merge
```

#### æª¢æŸ¥æ¸…å–®

ç™¼å¸ƒåˆ° public å¾Œï¼Œå‹™å¿…éµå®ˆï¼š

- [ ] âœ… ä¸åŸ·è¡Œ `git pull origin main`
- [ ] âœ… ä¸åŸ·è¡Œ `git merge origin/main`
- [ ] âœ… ä¸å˜—è©¦å°é½Šå…©å€‹ repo çš„ history
- [ ] âœ… Private æ°¸é ä¿æŒå®Œæ•´ commit è¨˜éŒ„
- [ ] âœ… ç·Šæ€¥ä¿®å¾©ä½¿ç”¨ cherry-pickï¼Œä¸ç”¨ merge

---

## æŒ‡ä»¤é€ŸæŸ¥è¡¨

| æŒ‡ä»¤ | ç”¨é€” | æ¨é€ç›®æ¨™ | è™•ç†é‚è¼¯ | æ³¨æ„äº‹é … |
|------|------|----------|----------|----------|
| `/gsave` | æäº¤è®Šæ›´ | æœ¬åœ° | è‡ªå‹•åˆ†é›¢å…¬é–‹/æ©Ÿæ•ç‚ºä¸åŒ commits | - |
| `/gpush` | æ¨é€å…¬é–‹ commits | private | è­˜åˆ¥ PRIVATE æ¨™è¨˜è·³éæ©Ÿæ• commits | - |
| `/privatepush` | æ¨é€æ©Ÿæ• commits | private | å„ªå…ˆæ¨é€ç¾æœ‰ PRIVATE commits | - |
| `/publicpr` | å»ºç«‹ PR åˆ°å…¬é–‹ repo | origin | è‡ªå‹•é¸æ“‡ç­–ç•¥ï¼ˆSquash/Cherry-pickï¼‰ | commits > 10 å»ºè­° Squash |
| `/publicrelease` | å»ºç«‹ Release Tag | origin | æ¨é€ tag è§¸ç™¼ GitHub Actions | ä¸æœƒåŒæ­¥å› private |

---

## å·¥ä½œæµç¨‹æª¢æŸ¥æ¸…å–®

### æ—¥å¸¸é–‹ç™¼

- [ ] ä¿®æ”¹ç¨‹å¼ç¢¼
- [ ] åŸ·è¡Œ `/gsave` æäº¤è®Šæ›´
- [ ] åŸ·è¡Œ `/gpush` æ¨é€åˆ° private
- [ ] å¦‚æœ‰æ©Ÿæ•æª”æ¡ˆæ›´æ–°ï¼ŒåŸ·è¡Œ `/privatepush`

### ç™¼å¸ƒæº–å‚™

- [ ] ç¢ºèªæ‰€æœ‰è®Šæ›´å·²æ¨é€åˆ° private
- [ ] åŸ·è¡Œ `/publicpr --dry-run` é è¦½
- [ ] æª¢æŸ¥éæ¿¾çµæœæ˜¯å¦æ­£ç¢º
- [ ] ç¢ºèªæ²’æœ‰æ©Ÿæ•æª”æ¡ˆè¢«åŒ…å«

### å¯¦éš›ç™¼å¸ƒ

- [ ] åŸ·è¡Œ `/publicpr` å»ºç«‹ PR
- [ ] åœ¨ GitHub æª¢æŸ¥ PR å…§å®¹
- [ ] é€²è¡Œ Code Review
- [ ] Merge PR åˆ° origin/main
- [ ] å»ºç«‹ Releaseï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ›´æ–° CHANGELOG.md

---

## å»¶ä¼¸é–±è®€

- **æŒ‡ä»¤è©³ç´°èªªæ˜**ï¼š
  - `.claude/commands/gsave.md`
  - `.claude/commands/gpush.md`
  - `.claude/commands/privatepush.md`
  - `.claude/commands/publicpr.md`

- **å°ˆæ¡ˆè¦ç¯„**ï¼š
  - `CLAUDE.md` - é–‹ç™¼è¦ç¯„ï¼ˆç§äººæª”æ¡ˆï¼‰
  - `.specify/memory/constitution.md` - å°ˆæ¡ˆæ†²ç« ï¼ˆç§äººæª”æ¡ˆï¼‰

- **Git æ–‡ä»¶**ï¼š
  - [Git Cherry-pick](https://git-scm.com/docs/git-cherry-pick)
  - [Git Filter-branch](https://git-scm.com/docs/git-filter-branch)
  - [GitHub CLI](https://cli.github.com/)

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-11-07
**ç¶­è­·è€…**ï¼šå°ˆæ¡ˆåœ˜éšŠ
**ç‰ˆæœ¬**ï¼šv1.0
