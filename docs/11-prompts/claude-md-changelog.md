# CLAUDE.md 變更日誌

**文檔目的**: 追蹤 CLAUDE.md 提示詞的版本歷史和重大變更

---

## 版本歷史

### v2.0（優化版本）- 2025-11-09

**類型**: 結構優化 + 內容增強
**狀態**: 待審核

#### 主要改進

1. **新增 Quick Reference 區塊**
   - 最常見任務 3 步驟（Bug 修復、新增功能、文件更新）
   - 關鍵指令速查表
   - 緊急除錯 5 步驟
   - **影響**: 快速查找時間從 30 秒降低到 5 秒（預估）

2. **增強任務類型自動判斷**
   - 關鍵詞 → 任務類型 → 工作流程 對照表
   - 平台識別 → 特定指南 對照表
   - 新增 FamiTicket、Cityline 平台支援
   - **影響**: 幫助 AI 更快速判斷當前任務類型

3. **精簡 Git 工作流程區塊**
   - 從 120-160 行精簡到 ~50 行
   - 詳細內容移到 `docs/12-git-workflow/git-safety-rules.md`
   - 保留核心要點和標準流程
   - **影響**: 減少 70% 篇幅，提升可讀性

4. **合併文件導航與常見問題索引**
   - 統一為「按任務類型查找」結構
   - 使用摺疊區塊隱藏詳細內容
   - 減少重複的文檔路徑
   - **影響**: 減少滾動距離，更清晰的導航

5. **優化憲法遵循聲明**
   - 9 大核心原則表格化
   - 增加「使用方式」說明
   - 精簡描述，更易記憶
   - **影響**: 更快速查找相關原則

6. **簡化測試指令區塊**
   - 保留核心測試指令
   - 詳細說明指向 `docs/07-testing-debugging/testing_execution_guide.md`
   - **影響**: 減少約 30% 篇幅

#### 量化效果

| 指標 | v1.0 | v2.0 | 改善 |
|------|------|------|------|
| 文檔總行數 | 399 行 | ~350 行 | -12% |
| Git 區塊行數 | 120-160 行 | ~50 行 | -70% |
| 快速查找時間（預估） | 30 秒 | 5 秒 | -83% |
| 決策支援 | 無 | 有（任務類型表） | 新增 |

#### 新增文檔

- `docs/11-prompts/claude-md-optimization-suggestions.md` - 優化建議
- `docs/11-prompts/CLAUDE-v2.md` - 優化版本
- `docs/12-git-workflow/git-safety-rules.md` - Git 安全規則詳細說明
- `docs/11-prompts/claude-md-changelog.md` - 本變更日誌

#### 向後兼容性

- ✅ 保留所有原有區塊
- ✅ 只調整順序和格式
- ✅ 所有文檔路徑不變
- ✅ 功能完全向後兼容

#### 實施建議

1. **高優先級**（立即實施）：
   - ✅ 新增 Quick Reference 區塊
   - ✅ 增強任務類型決策樹
   - ✅ 精簡 Git 工作流程區塊

2. **中優先級**（建議實施）：
   - ✅ 合併文件導航與常見問題索引
   - ✅ 簡化測試指令區塊
   - ✅ 優化憲法遵循聲明

3. **低優先級**（可選）：
   - ⚪ 增加更多視覺提示
   - ⚪ 進一步優化摺疊區塊

---

### v1.0（初始版本）- 2025-XX-XX

**類型**: 初始版本
**狀態**: 當前使用中

#### 主要內容

1. **憲法遵循聲明**
   - 9 大核心原則
   - 強調憲法優先性

2. **工作模式決策樹**
   - 一般開發流程
   - 重大功能開發（speckit）

3. **開發策略：NoDriver First**
   - 技術優先級說明

4. **文件導航**
   - 初次接手專案
   - 開發新功能
   - 除錯問題
   - 執行測試
   - Git 與發布工作流程

5. **Git 工作流程**
   - 詳細的推送安全規則（120-160 行）
   - 錯誤與正確範例

6. **Accept Edits On 工作流程**
   - 核心流程
   - 文件檢查模式

7. **快速除錯**
   - 檢查清單
   - Spec 檢查指南

8. **快速測試指令**
   - NoDriver 測試指令（Git Bash、Windows CMD）
   - 檢查輸出指令

9. **常見問題索引**
   - 技術問題
   - 規格與驗證問題
   - 新平台開發流程
   - Shadow DOM & 選擇器
   - 平台問題
   - 環境問題

10. **程式碼規範**
    - Emoji 使用規範

11. **speckit 工作流程**
    - 完整流程
    - 詳細說明

12. **核心文件索引**
    - 開發架構
    - 除錯文件
    - 疑難排解
    - 其他

13. **使用原則**

#### 已知問題

- ❌ 缺少快速參考區塊
- ❌ Git 工作流程區塊過長
- ❌ 文件導航與常見問題索引有重複
- ❌ 缺少任務類型自動判斷機制
- ❌ 憲法在多處重複提及

---

## 版本對照

### 結構對照

| 區塊 | v1.0 | v2.0 | 變更 |
|------|------|------|------|
| Quick Reference | ❌ 無 | ✅ 有 | 新增 |
| 任務類型決策樹 | 基礎版 | 增強版（表格化） | 優化 |
| 憲法遵循聲明 | 列表式 | 表格化 | 優化 |
| 文件導航 | 分散 | 集中（按任務類型） | 合併 |
| Git 工作流程 | 120-160 行 | ~50 行 | 精簡 |
| 常見問題索引 | 獨立區塊 | 合併到文件導航 | 合併 |
| 測試指令 | 詳細 | 精簡 | 精簡 |

### 行數對照

| 區塊 | v1.0 行數 | v2.0 行數 | 變更 |
|------|-----------|-----------|------|
| Quick Reference | 0 | ~40 | +40 |
| 任務類型決策樹 | ~25 | ~35 | +10 |
| 憲法遵循聲明 | ~20 | ~30 | +10 |
| Git 工作流程 | ~140 | ~50 | -90 |
| 文件導航 | ~120 | ~100 | -20 |
| 常見問題索引 | ~35 | 0（合併） | -35 |
| 測試指令 | ~45 | ~30 | -15 |
| **總計** | **~399** | **~350** | **-49 (-12%)** |

---

## 未來改進計劃

### v2.1（計劃中）

**預計發布**: TBD
**類型**: 內容增強

**計劃改進**:
1. 增加更多平台的快速參考
2. 增強錯誤處理速查表
3. 增加更多實務範例

### v3.0（概念中）

**預計發布**: TBD
**類型**: 重大重構

**概念改進**:
1. 使用 AI 驅動的任務識別
2. 動態生成文檔索引
3. 整合更多自動化工具
4. 支援多語言提示詞

---

## 維護指南

### 何時更新版本號？

- **主版本號（vX.0）**: 結構重大重構、破壞性變更
- **次版本號（v2.X）**: 新增區塊、重要功能增強
- **修訂版本號（v2.0.X）**: 內容修正、小幅優化

### 更新流程

1. **提出改進建議**
   - 創建 `docs/11-prompts/claude-md-optimization-suggestions-vX.md`
   - 列出具體改進項目和預期效果

2. **創建新版本**
   - 複製當前版本到 `docs/11-prompts/CLAUDE-vX.md`
   - 實施改進

3. **測試驗證**
   - 使用新版本進行實際開發任務
   - 收集反饋和問題

4. **更新變更日誌**
   - 記錄所有變更到本文檔
   - 包含量化效果

5. **替換主文檔**（經審核後）
   - 備份當前版本到 `CLAUDE-v1.md.backup`
   - 將新版本覆蓋到 `CLAUDE.md`
   - 提交變更到版本控制

### 變更類型分類

- **結構優化**: 調整區塊順序、合併區塊
- **內容增強**: 新增區塊、增加內容
- **內容精簡**: 移除冗餘、精簡描述
- **格式優化**: 表格化、視覺化改進
- **功能新增**: 新增功能、新增指令

---

## 相關文件

- **CLAUDE.md** - 當前使用的提示詞（v1.0）
- **docs/11-prompts/CLAUDE-v2.md** - 優化版本（v2.0）
- **docs/11-prompts/claude-md-optimization-suggestions.md** - 優化建議
- **docs/12-git-workflow/git-safety-rules.md** - Git 安全規則（從 v1.0 移出）

---

**最後更新**: 2025-11-09
**維護者**: Project Team
**狀態**: ACTIVE
